{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst API_KEY = '41936299-e1d4d29e6aed15564c1848147';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('.search-input'),\n  button: document.querySelector('.search-btn'),\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery'),\n};\nlet simpleGallery;\n\nrefs.form.addEventListener(`submit`, e => {\n  e.preventDefault();\n  const query = refs.input.value.trim();\n  if (!query) {\n    createMessage('Please, enter search term!');\n    return;\n  }\n  showLoader(true);\n  refs.form.reset();\n\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  fetchApiPhotos(url)\n    .then(data => {\n      if (data.hits.length === 0) {\n        createMessage(\n          `Sorry, there are no images matching your search query. Please, try again!`\n        );\n        return;\n      }\n      simpleGallery = new SimpleLightbox('.gallery-item a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      simpleGallery.refresh();\n      refs.gallery.innerHTML = createMarkup(data.hits);\n    })\n    .catch(error => console.error(error))\n    .finally(() => showLoader(false));\n});\n\nfunction fetchApiPhotos(url) {\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return response.json();\n  });\n}\n\nfunction createMarkup(hits) {\n  return hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n          <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-img\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      />\n      <p class=\"gallery-inf\">\n      Likes: <span class=\"img-stat\">${likes}</span> \n      Views: <span class=\"img-stat\">${views}</span> \n      Comments: <span class=\"img-stat\">${comments}</span> \n      Downloads: <span class=\"img-stat\">${downloads}</span></p>\n    </a>\n  </li>`\n    )\n    .join('');\n}\n\nfunction createMessage(message) {\n  iziToast.show({\n    class: 'error-circul',\n    position: 'topRight',\n    icon: 'error-circul',\n    message: message,\n    maxWidth: '432',\n    messageColor: '#fff',\n    messageSize: '16px',\n    backgroundColor: '#EF4040',\n    close: false,\n    closeOnClick: true,\n  });\n}\n\nfunction showLoader(state = true) {\n  refs.loader.style.display = !state ? 'none' : 'inline-block';\n  refs.button.disabled = state;\n}\n"],"names":["BASE_URL","API_KEY","refs","simpleGallery","e","query","createMessage","showLoader","url","fetchApiPhotos","data","SimpleLightbox","createMarkup","error","response","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","message","iziToast","state"],"mappings":"6vBAMA,MAAMA,EAAW,2BAEXC,EAAU,qCAEVC,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,eAAe,EAC7C,OAAQ,SAAS,cAAc,aAAa,EAC5C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,CAC5C,EACA,IAAIC,EAEJD,EAAK,KAAK,iBAAiB,SAAUE,GAAK,CACxCA,EAAE,eAAc,EAChB,MAAMC,EAAQH,EAAK,MAAM,MAAM,KAAI,EACnC,GAAI,CAACG,EAAO,CACVC,EAAc,4BAA4B,EAC1C,MACD,CACDC,EAAW,EAAI,EACfL,EAAK,KAAK,QAEV,MAAMM,EAAM,GAAGR,SAAgBC,OAAaI,4DAE5CI,EAAeD,CAAG,EACf,KAAKE,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BJ,EACE,2EACV,EACQ,MACD,CACDH,EAAgB,IAAIQ,EAAe,kBAAmB,CACpD,aAAc,MACd,aAAc,GACtB,CAAO,EACDR,EAAc,QAAO,EACrBD,EAAK,QAAQ,UAAYU,EAAaF,EAAK,IAAI,CACrD,CAAK,EACA,MAAMG,GAAS,QAAQ,MAAMA,CAAK,CAAC,EACnC,QAAQ,IAAMN,EAAW,EAAK,CAAC,CACpC,CAAC,EAED,SAASE,EAAeD,EAAK,CAC3B,OAAO,MAAMA,CAAG,EAAE,KAAKM,GAAY,CACjC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASF,EAAaG,EAAM,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA,oCAE4BL;AAAA;AAAA;AAAA,eAGrBD;AAAA,eACAE;AAAA;AAAA;AAAA,sCAGuBC;AAAA,sCACAC;AAAA,yCACGC;AAAA,0CACCC;AAAA;AAAA,QAGrC,EACA,KAAK,EAAE,CACZ,CAEA,SAAShB,EAAciB,EAAS,CAC9BC,EAAS,KAAK,CACZ,MAAO,eACP,SAAU,WACV,KAAM,eACN,QAASD,EACT,SAAU,MACV,aAAc,OACd,YAAa,OACb,gBAAiB,UACjB,MAAO,GACP,aAAc,EAClB,CAAG,CACH,CAEA,SAAShB,EAAWkB,EAAQ,GAAM,CAChCvB,EAAK,OAAO,MAAM,QAAWuB,EAAiB,eAAT,OACrCvB,EAAK,OAAO,SAAWuB,CACzB"}