import{a as y,S as b,i as M}from"./assets/vendor-2618a76b.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();y.defaults.baseURL="https://pixabay.com/api";const S="41936299-e1d4d29e6aed15564c1848147",n="is-hidden",g=new b(".gallery-item a",{captionsData:"alt",captionDelay:250}),r={form:document.querySelector(".form"),input:document.querySelector(".search-input"),button:document.querySelector(".search-btn"),loader:document.querySelector(".loader"),gallery:document.querySelector(".gallery"),loadMoreBtn:document.querySelector(".load-more-btn")};let d="",i=1,m=0;r.form.addEventListener("submit",w);async function w(e){if(e.preventDefault(),r.gallery.innerHTML="",i=1,r.loadMoreBtn.classList.add(n),d=r.input.value.trim(),!d){u("Please, enter search term!");return}try{const{hits:o,totalHits:a}=await p(d);m=Math.ceil(a/40),h(o),g.refresh(),r.form.reset(),o.length>0?(r.loadMoreBtn.classList.remove(n),r.loadMoreBtn.addEventListener("click",B)):(r.loadMoreBtn.classList.add(n),u("Sorry, there are no images matching your search query. Please, try again!")),f(!1)}catch(o){console.log(o)}finally{r.form.reset(),i===m&&(r.loadMoreBtn.classList.add(hiddenClass),u("We're sorry, but you've reached the end of search results!"))}}async function B(){i+=1;try{f(!0),r.loadMoreBtn.classList.add(n);const{hits:e}=await p(d,i);h(e),g.refresh(),f(!1),q(),r.loadMoreBtn.classList.remove(n)}catch(e){console.log(e)}finally{i===m&&(r.loadMoreBtn.classList.add(n),u("We're sorry, but you've reached the end of search results!"))}}async function p(e,o=1){return f(!0),(await y.get("/",{params:{key:S,q:e,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:40,page:o}})).data}function h(e){return e.map(({webformatURL:o,largeImageURL:a,tags:c,likes:t,views:s,comments:l,downloads:L})=>`
          <li class="gallery-item">
    <a class="gallery-link" href="${a}">
      <img
        class="gallery-img"
        src="${o}"
        alt="${c}"
      />
      <p class="gallery-inf">
      Likes: <span class="img-stat">${t}</span> 
      Views: <span class="img-stat">${s}</span> 
      Comments: <span class="img-stat">${l}</span> 
      Downloads: <span class="img-stat">${L}</span></p>
    </a>
  </li>`).join("")}function u(e){M.show({class:"error-circul",position:"topRight",icon:"error-circul",message:e,maxWidth:"432",messageColor:"#fff",messageSize:"16px",backgroundColor:"#EF4040",close:!1,closeOnClick:!0})}function q(){const e=document.querySelector(".gallery-link");if(e){const o=e.getBoundingClientRect();window.scrollBy({top:o.height*2,left:0,behavior:"smooth"})}}function f(e=!0){r.loader.style.display=e?"inline-block":"none",r.button.disabled=e}
//# sourceMappingURL=commonHelpers.js.map
